<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>民俗祈福</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ===== 全局 SVG 定义 ===== -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
        <defs>
            <!-- 祥云 -->
            <symbol id="icon-cloud" viewBox="0 0 120 60">
                <path d="M20,50 Q5,50 5,38 Q5,28 15,25 Q12,15 22,10 Q32,4 42,10 Q48,2 60,2 Q75,2 80,12 Q90,8 98,15 Q108,22 105,35 Q115,38 115,48 Q115,55 105,55 Z"
                      fill="currentColor" opacity="0.15"/>
            </symbol>
            <!-- 灯笼 -->
            <symbol id="icon-lantern" viewBox="0 0 60 100">
                <rect x="22" y="2" width="16" height="6" rx="2" fill="#ffd700"/>
                <line x1="30" y1="8" x2="30" y2="16" stroke="#cc0000" stroke-width="2"/>
                <ellipse cx="30" cy="48" rx="22" ry="32" fill="#ee2222" stroke="#cc0000" stroke-width="1.5"/>
                <ellipse cx="30" cy="48" rx="22" ry="32" fill="url(#lanternShine)" />
                <rect x="20" y="15" width="20" height="5" rx="2" fill="#ffd700"/>
                <rect x="20" y="76" width="20" height="5" rx="2" fill="#ffd700"/>
                <text x="30" y="53" text-anchor="middle" fill="#ffd700" font-size="16" font-weight="bold">福</text>
                <line x1="30" y1="81" x2="30" y2="90" stroke="#ffd700" stroke-width="1.5"/>
                <path d="M24,90 Q30,98 36,90" stroke="#ffd700" stroke-width="1.5" fill="none"/>
            </symbol>
            <!-- 莲花 -->
            <symbol id="icon-lotus" viewBox="0 0 100 80">
                <path d="M50,70 Q45,50 30,40 Q20,35 25,25 Q30,18 40,25 Q45,30 50,35 Q55,30 60,25 Q70,18 75,25 Q80,35 70,40 Q55,50 50,70Z"
                      fill="#ff6b8a" opacity="0.6"/>
                <path d="M50,70 Q42,45 20,38 Q10,35 18,22 Q25,12 35,22 Q42,30 50,40 Q58,30 65,22 Q75,12 82,22 Q90,35 80,38 Q58,45 50,70Z"
                      fill="#ff8fa8" opacity="0.4"/>
                <circle cx="50" cy="42" r="6" fill="#ffd700" opacity="0.5"/>
            </symbol>
            <!-- 香炉 -->
            <symbol id="icon-censer" viewBox="0 0 80 70">
                <rect x="15" y="30" width="50" height="28" rx="6" fill="#8B6914" stroke="#6B4F12" stroke-width="1.5"/>
                <rect x="10" y="28" width="60" height="6" rx="3" fill="#A07818"/>
                <rect x="20" y="56" width="8" height="10" rx="2" fill="#6B4F12"/>
                <rect x="52" y="56" width="8" height="10" rx="2" fill="#6B4F12"/>
                <rect x="28" y="60" width="24" height="6" rx="2" fill="#8B6914"/>
                <ellipse cx="30" cy="28" rx="2" ry="2" fill="#ff6600"/>
                <ellipse cx="40" cy="28" rx="2" ry="2" fill="#ff6600"/>
                <ellipse cx="50" cy="28" rx="2" ry="2" fill="#ff6600"/>
            </symbol>
            <!-- 香烟/烟雾 -->
            <symbol id="icon-smoke" viewBox="0 0 30 60">
                <path d="M15,60 Q10,45 18,35 Q22,28 14,20 Q8,12 16,2"
                      stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.4"/>
            </symbol>
            <!-- 卷轴 -->
            <symbol id="icon-scroll-top" viewBox="0 0 200 20">
                <rect x="0" y="5" width="200" height="10" rx="5" fill="#8B6914"/>
                <circle cx="5" cy="10" r="8" fill="#A07818" stroke="#6B4F12" stroke-width="1"/>
                <circle cx="195" cy="10" r="8" fill="#A07818" stroke="#6B4F12" stroke-width="1"/>
            </symbol>
            <!-- 铜钱 -->
            <symbol id="icon-coin" viewBox="0 0 40 40">
                <circle cx="20" cy="20" r="18" fill="#DAA520" stroke="#B8860B" stroke-width="2"/>
                <circle cx="20" cy="20" r="16" fill="none" stroke="#B8860B" stroke-width="0.5"/>
                <rect x="14" y="14" width="12" height="12" rx="1" fill="#8B6914" stroke="#B8860B" stroke-width="1"/>
            </symbol>
            <!-- 渐变定义 -->
            <linearGradient id="lanternShine" x1="30%" y1="0%" x2="70%" y2="100%">
                <stop offset="0%" style="stop-color:rgba(255,200,100,0.3)"/>
                <stop offset="50%" style="stop-color:rgba(255,255,255,0)"/>
                <stop offset="100%" style="stop-color:rgba(0,0,0,0.15)"/>
            </linearGradient>
            <!-- 筊杯渐变 -->
            <linearGradient id="flatGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#e83030"/>
                <stop offset="50%" style="stop-color:#cc1111"/>
                <stop offset="100%" style="stop-color:#990000"/>
            </linearGradient>
            <linearGradient id="roundGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#cc2020"/>
                <stop offset="40%" style="stop-color:#ff4040"/>
                <stop offset="70%" style="stop-color:#cc2020"/>
                <stop offset="100%" style="stop-color:#881010"/>
            </linearGradient>
            <linearGradient id="flatGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#e83030"/>
                <stop offset="50%" style="stop-color:#cc1111"/>
                <stop offset="100%" style="stop-color:#990000"/>
            </linearGradient>
            <linearGradient id="roundGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#cc2020"/>
                <stop offset="40%" style="stop-color:#ff4040"/>
                <stop offset="70%" style="stop-color:#cc2020"/>
                <stop offset="100%" style="stop-color:#881010"/>
            </linearGradient>
        </defs>
    </svg>

    <!-- ===== 全局浮动装饰 ===== -->
    <div class="floating-decor">
        <svg class="decor-cloud cloud-1" width="120" height="60"><use href="#icon-cloud"/></svg>
        <svg class="decor-cloud cloud-2" width="90" height="45"><use href="#icon-cloud"/></svg>
        <svg class="decor-cloud cloud-3" width="100" height="50"><use href="#icon-cloud"/></svg>
        <svg class="decor-lantern lantern-left" width="40" height="66"><use href="#icon-lantern"/></svg>
        <svg class="decor-lantern lantern-right" width="40" height="66"><use href="#icon-lantern"/></svg>
    </div>

    <!-- 页面1: 选择庙宇主题 -->
    <div id="page-temple" class="page active">
        <div class="page-inner">
            <div class="top-banner">
                <div class="banner-lanterns">
                    <svg width="36" height="60"><use href="#icon-lantern"/></svg>
                    <svg width="36" height="60"><use href="#icon-lantern"/></svg>
                </div>
                <h1 class="main-title">民俗祈福</h1>
                <div class="banner-clouds">
                    <svg width="80" height="40" class="color-gold"><use href="#icon-cloud"/></svg>
                    <svg width="60" height="30" class="color-gold"><use href="#icon-cloud"/></svg>
                </div>
            </div>
            <p class="subtitle">选择您所在地区的庙宇</p>
            <div id="temple-list" class="temple-list">
                <!-- JS动态生成 -->
            </div>
            <div class="footer-deco">
                <svg width="40" height="32" class="color-gold" style="vertical-align:middle;opacity:0.5;"><use href="#icon-lotus"/></svg>
                <span>诚心祈愿 有求必应</span>
                <svg width="40" height="32" class="color-gold" style="vertical-align:middle;opacity:0.5;"><use href="#icon-lotus"/></svg>
            </div>
        </div>
    </div>

    <!-- 页面2: 输入祈愿 -->
    <div id="page-pray" class="page">
        <div class="page-inner">
            <div class="temple-header">
                <div class="deity-frame">
                    <div class="deity-glow"></div>
                    <div class="deity-img" id="deity-img"></div>
                    <div class="deity-ornament">
                        <svg width="50" height="40" class="color-gold"><use href="#icon-cloud"/></svg>
                    </div>
                </div>
                <h2 id="temple-name" class="temple-name"></h2>
            </div>
            <!-- 香炉装饰 -->
            <div class="censer-area">
                <div class="smoke-container">
                    <svg class="smoke smoke-1" width="20" height="40"><use href="#icon-smoke"/></svg>
                    <svg class="smoke smoke-2" width="16" height="35"><use href="#icon-smoke"/></svg>
                    <svg class="smoke smoke-3" width="18" height="38"><use href="#icon-smoke"/></svg>
                </div>
                <svg width="60" height="52"><use href="#icon-censer"/></svg>
            </div>
            <div class="divider">
                <svg width="20" height="20" class="color-gold"><use href="#icon-coin"/></svg>
                <span class="divider-dot">✦</span>
                <svg width="20" height="20" class="color-gold"><use href="#icon-coin"/></svg>
                <span class="divider-dot">✦</span>
                <svg width="20" height="20" class="color-gold"><use href="#icon-coin"/></svg>
            </div>
            <div class="pray-section">
                <label class="pray-label" for="pray-input">请输入您的祈愿</label>
                <textarea id="pray-input" class="pray-input" rows="4" placeholder="例如：求家人身体健康、出入平安..."></textarea>
            </div>
            <button id="btn-divine" class="btn-primary">开始掷杯</button>
            <button id="btn-back-temple" class="btn-secondary">返回选择</button>
        </div>
    </div>

    <!-- 页面3: 掷杯动画 -->
    <div id="page-divination" class="page">
        <div class="page-inner">
            <h2 class="section-title">掷杯问卦</h2>
            <p class="hint-text" id="shake-hint">点击下方按钮开始掷杯</p>
            <div id="blocks-area" class="blocks-area">
                <!-- 左筊杯 -->
                <div class="block block-left" id="block-left">
                    <div class="block-inner">
                        <div class="block-flat">
                            <svg class="jiaobei-svg" width="70" height="130" viewBox="0 0 70 130">
                                <path d="M35 5 C55 5, 68 30, 68 65 C68 100, 55 125, 35 125 C25 125, 15 100, 15 65 C15 30, 25 5, 35 5 Z"
                                      fill="url(#flatGrad)" stroke="#cc0000" stroke-width="2"/>
                                <text x="35" y="70" text-anchor="middle" fill="#ffd700" font-size="18" font-weight="bold">平</text>
                            </svg>
                            <span class="block-label">阴面</span>
                        </div>
                        <div class="block-round">
                            <svg class="jiaobei-svg" width="70" height="130" viewBox="0 0 70 130">
                                <path d="M35 5 C55 5, 68 30, 68 65 C68 100, 55 125, 35 125 C25 125, 15 100, 15 65 C15 30, 25 5, 35 5 Z"
                                      fill="url(#roundGrad)" stroke="#aa0000" stroke-width="2"/>
                                <ellipse cx="38" cy="60" rx="16" ry="35" fill="none" stroke="rgba(255,200,200,0.3)" stroke-width="1.5"/>
                                <text x="35" y="70" text-anchor="middle" fill="#ffe0b0" font-size="18" font-weight="bold">凸</text>
                            </svg>
                            <span class="block-label">阳面</span>
                        </div>
                    </div>
                </div>
                <!-- 右筊杯 -->
                <div class="block block-right" id="block-right">
                    <div class="block-inner">
                        <div class="block-flat">
                            <svg class="jiaobei-svg" width="70" height="130" viewBox="0 0 70 130">
                                <path d="M35 5 C55 5, 68 30, 68 65 C68 100, 55 125, 35 125 C25 125, 15 100, 15 65 C15 30, 25 5, 35 5 Z"
                                      fill="url(#flatGrad2)" stroke="#cc0000" stroke-width="2"/>
                                <text x="35" y="70" text-anchor="middle" fill="#ffd700" font-size="18" font-weight="bold">平</text>
                            </svg>
                            <span class="block-label">阴面</span>
                        </div>
                        <div class="block-round">
                            <svg class="jiaobei-svg" width="70" height="130" viewBox="0 0 70 130">
                                <path d="M35 5 C55 5, 68 30, 68 65 C68 100, 55 125, 35 125 C25 125, 15 100, 15 65 C15 30, 25 5, 35 5 Z"
                                      fill="url(#roundGrad2)" stroke="#aa0000" stroke-width="2"/>
                                <ellipse cx="38" cy="60" rx="16" ry="35" fill="none" stroke="rgba(255,200,200,0.3)" stroke-width="1.5"/>
                                <text x="35" y="70" text-anchor="middle" fill="#ffe0b0" font-size="18" font-weight="bold">凸</text>
                            </svg>
                            <span class="block-label">阳面</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="block-result" class="block-result" style="display:none;">
                <span id="block-result-text"></span>
            </div>
            <button id="btn-throw" class="btn-primary btn-throw">掷杯</button>
            <button id="btn-get-fortune" class="btn-primary" style="display:none;">求签</button>
            <button id="btn-back-pray" class="btn-secondary">重新祈愿</button>
        </div>
    </div>

    <!-- 页面4: 签文结果 -->
    <div id="page-result" class="page">
        <div class="page-inner">
            <div class="result-card">
                <div class="result-scroll-top">
                    <svg width="100%" height="16" viewBox="0 0 200 20" preserveAspectRatio="none"><use href="#icon-scroll-top"/></svg>
                </div>
                <div class="result-corner result-corner-tl"></div>
                <div class="result-corner result-corner-tr"></div>
                <div class="result-corner result-corner-bl"></div>
                <div class="result-corner result-corner-br"></div>
                <div class="result-rank" id="result-rank"></div>
                <h2 class="result-title" id="result-title"></h2>
                <div class="result-poem" id="result-poem"></div>
                <div class="result-explain" id="result-explain"></div>
                <div class="result-scroll-bottom">
                    <svg width="100%" height="16" viewBox="0 0 200 20" preserveAspectRatio="none"><use href="#icon-scroll-top"/></svg>
                </div>
            </div>
            <div class="result-lotus-deco">
                <svg width="60" height="48"><use href="#icon-lotus"/></svg>
            </div>
            <button id="btn-read" class="btn-primary">语音播报</button>
            <button id="btn-again" class="btn-secondary">再求一签</button>
            <button id="btn-home" class="btn-secondary">返回首页</button>
            <div class="footer-deco">
                <svg width="40" height="32" class="color-gold" style="vertical-align:middle;opacity:0.5;"><use href="#icon-lotus"/></svg>
                <span>心诚则灵</span>
                <svg width="40" height="32" class="color-gold" style="vertical-align:middle;opacity:0.5;"><use href="#icon-lotus"/></svg>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
